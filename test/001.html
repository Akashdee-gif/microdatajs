<!DOCTYPE html>
<html>
<head>
<title>document.getItems</title>
<script src="../microdata.js"></script>
</head>
<body>
<p>FAIL (script didn't run)</p>
<div id="a" item>
  <div id="aa" item></div>
</div>
<div id="b" item="">
  <div id="bb" item></div>
</div>
<div id="c" item="org.example.foo"></div>
<div id="d" item="org.example.bar"></div>
<div id="e" item="org.example.foo org.example.bar"></div>
<div id="f" item="org.example.bar org.example.foo"></div>
</body>
<script>
function verify(typeNames, expected) {
  var items = document.getItems(typeNames);
  if (items.length != expected.length) {
    alert('expected ' + expected.length + ' nodes, got ' + items.length);
    return false;
  }
  for (var i = 0; i < expected.length; i++) {
    if (items[i].id != expected[i])
      return false;
    if (items[i] != items.item(i))
      return false;
  }
  return true;
}
var passed = true;
passed &= verify('', ['a', 'b', 'c', 'd', 'e', 'f']);
passed &= verify('org.example.foo', ['c', 'e', 'f']);
passed &= verify('org.example.bar', ['d', 'e', 'f']);
passed &= verify('org.example.spam', []);
document.getElementsByTagName('p')[0].innerHTML = passed ? 'PASS' : 'FAIL';
</script>
</html>
